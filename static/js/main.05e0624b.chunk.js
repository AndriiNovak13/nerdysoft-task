(this["webpackJsonpannouncement-app"]=this["webpackJsonpannouncement-app"]||[]).push([[0],{36:function(e,t,n){e.exports=n(64)},41:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(16),r=n.n(o),i=(n(41),n(2)),l=n(3),m="SET_ANNOUCEMENT",s="SET_LOADED",u="ADD_ANNOUCEMENT",d="REMOVE_ANNOUCEMENT",p="EDIT_ANNOUCEMENT",E="SET_TITLE_FAST",f="SET_WEATHER",v=n(21),_=n.n(v),h=function(e){return{type:s,payload:e}},N=function(e){return{type:m,payload:e}},b=function(e){return{type:f,payload:e}},C=n(11),g=n(10),O=n(15);function y(){var e=new Date,t=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,n=e.getDate()<10?"0"+e.getDate():e.getDate(),a=e.getFullYear();return"".concat(n,".").concat(t,".").concat(a)}var A=function(e){var t=e.closePopup,n=e.onAddAnnouncement,a=e.isEdit,o=e.onEditAnnouncement,r=e.item,i=e.announcementsItems,l=c.a.useState(a?r.Title:""),m=Object(C.a)(l,2),s=m[0],u=m[1],d=c.a.useState(a?r.Description:""),p=Object(C.a)(d,2),E=p[0],f=p[1];return c.a.createElement("div",{className:"popup"},c.a.createElement("div",{className:"popup__content"},c.a.createElement("div",{className:"popup__close",onClick:t},c.a.createElement("svg",{width:"21",height:"21",viewBox:"0 0 21 21",fill:"none",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.63 10.315C20.63 10.2335 20.6291 10.1523 20.6272 10.0712C20.4972 4.49574 15.9212 0 10.315 0C4.62737 0 0 4.62737 0 10.315C0 15.9721 4.57776 20.5802 10.2234 20.6296C10.2539 20.6299 10.2844 20.63 10.315 20.63C10.3456 20.63 10.3761 20.6299 10.4066 20.6296C16.0522 20.5802 20.63 15.9721 20.63 10.315ZM14.2303 13.1855C14.1879 13.0885 14.1265 13.0009 14.0497 12.928L11.4373 10.315L14.0497 7.70203C14.1922 7.55202 14.2705 7.35226 14.2679 7.14536C14.2652 6.93846 14.1819 6.74077 14.0355 6.59446C13.8892 6.44814 13.6915 6.36477 13.4846 6.36212C13.2777 6.35947 13.078 6.43775 12.928 6.58028L10.315 9.19275L7.70203 6.58028C7.55202 6.43775 7.35226 6.35947 7.14536 6.36212C6.93846 6.36477 6.74077 6.44814 6.59446 6.59446C6.44814 6.74077 6.36477 6.93846 6.36212 7.14536C6.35947 7.35226 6.43775 7.55202 6.58028 7.70203L9.19275 10.315L6.58028 12.928C6.43775 13.078 6.35947 13.2777 6.36212 13.4846C6.36477 13.6915 6.44814 13.8892 6.59446 14.0355C6.74077 14.1819 6.93846 14.2652 7.14536 14.2679C7.35226 14.2705 7.55202 14.1922 7.70203 14.0497L10.315 11.4373L12.928 14.0497C13.0009 14.1265 13.0885 14.1879 13.1855 14.2303C13.2826 14.2727 13.3872 14.2952 13.4931 14.2966C13.599 14.298 13.7041 14.2781 13.8022 14.2382C13.9003 14.1983 13.9894 14.1392 14.0643 14.0643C14.1392 13.9894 14.1983 13.9003 14.2382 13.8022C14.2781 13.7041 14.298 13.599 14.2966 13.4931C14.2953 13.3872 14.2727 13.2826 14.2303 13.1855Z",fill:"#5E5E5E"}))),c.a.createElement("div",{className:"popup__inner"},c.a.createElement("div",{className:"popup__title"},c.a.createElement("input",{type:"text",placeholder:"Title",value:s,onChange:function(e){return u(e.target.value)}})),c.a.createElement("div",{className:"popup__description"},c.a.createElement("textarea",{placeholder:"Description",value:E,onChange:function(e){return f(e.target.value)}})),c.a.createElement("button",{className:"popup__btn",onClick:a?function(){if(s&&E){var e={Title:s,Description:E,DateAdded:y(),id:r.id};o(e),t(),u(""),f("")}else alert("Fill in the required fields!")}:function(){if(s&&E){var e,a=!0,c=Object(O.a)(i);try{for(c.s();!(e=c.n()).done;){var o=e.value;if(s===o.Title||E===o.Description){alert("This ad already exists"),a=!1;break}}}catch(l){c.e(l)}finally{c.f()}if(a){var r={Title:s,Description:E,DateAdded:y(),id:Math.floor(1e4*Math.random())};n(r),t(),u(""),f("")}}else alert("Fill in the required fields!")}},a?"Edit":"Add"))))};A.defaultProps={item:{},announcementsItems:[]};var w=A,j=function(e){var t=e.onAddAnnouncement,n=c.a.useState(!1),a=Object(C.a)(n,2),o=a[0],r=a[1],i=function(){r(!o)},m=Object(l.c)((function(e){return e.Announcement.announcementsItems}));return c.a.createElement("header",{className:"header"},c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"header__box"},c.a.createElement("div",{className:"header__item-logo"},c.a.createElement(g.b,{to:"/nerdysoft-task"},"Announcement")),c.a.createElement("div",{className:"header__item-add"},c.a.createElement("button",{onClick:i},"add announcement")))),o&&c.a.createElement(w,{closePopup:i,onAddAnnouncement:t,announcementsItems:m}))},I=function(e){var t=e.announcementsItemsLength,n=e.onSetTitleFast,a=c.a.useState(""),o=Object(C.a)(a,2),r=o[0],i=o[1];return c.a.createElement("div",{className:"tools"},c.a.createElement("div",{className:"tools__box"},c.a.createElement("div",{className:"tools__item-search"},c.a.createElement("input",{type:"text",placeholder:"Enter a title",value:r,onChange:function(e){i(e.target.value),n(e.target.value)}})),c.a.createElement("div",{className:"tools__item-count"},"Announcement: ",t)))};I.defaultProps={announcementsItemsLength:0};var T=I,L=function(e){var t=e.item,n=e.onRemoveAnnouncement,a=e.id,o=e.onEditAnnouncement,r=c.a.useState(!1),i=Object(C.a)(r,2),l=i[0],m=i[1],s=function(){m(!l)};return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"announcement__item"},c.a.createElement("div",{className:"item__title"},c.a.createElement(g.b,{to:"/announcement/".concat(a)},t.Title),c.a.createElement("div",{className:"remove__item",onClick:function(){n(a)}},c.a.createElement("svg",{width:"11",height:"11",viewBox:"0 0 11 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("path",{d:"M6.87215 5.5L10.7129 1.65926C10.8952 1.47731 10.9977 1.23039 10.9979 0.972832C10.9982 0.715276 10.8961 0.468178 10.7141 0.285898C10.5321 0.103617 10.2852 0.00108525 10.0277 0.000857792C9.77011 0.000630336 9.52302 0.102726 9.34074 0.284685L5.5 4.12542L1.65926 0.284685C1.47698 0.102404 1.22976 0 0.971974 0C0.714191 0 0.466965 0.102404 0.284685 0.284685C0.102404 0.466965 0 0.714191 0 0.971974C0 1.22976 0.102404 1.47698 0.284685 1.65926L4.12542 5.5L0.284685 9.34074C0.102404 9.52302 0 9.77024 0 10.028C0 10.2858 0.102404 10.533 0.284685 10.7153C0.466965 10.8976 0.714191 11 0.971974 11C1.22976 11 1.47698 10.8976 1.65926 10.7153L5.5 6.87458L9.34074 10.7153C9.52302 10.8976 9.77024 11 10.028 11C10.2858 11 10.533 10.8976 10.7153 10.7153C10.8976 10.533 11 10.2858 11 10.028C11 9.77024 10.8976 9.52302 10.7153 9.34074L6.87215 5.5Z",fill:"black"})))),c.a.createElement("div",{className:"item__description"},t.Description),c.a.createElement("div",{className:"item__tools"},c.a.createElement("div",{className:"item__tool-edit"},c.a.createElement("button",{onClick:s},"Edit")),c.a.createElement("div",{className:"item__tool-date"},t.DateAdded))),l&&c.a.createElement(w,{onEditAnnouncement:o,closePopup:s,isEdit:!0,item:t}))};L.defaultProps={item:{}};var S=L,D=function(e){var t=e.announcementsItems,n=e.onRemoveAnnouncement,a=e.onEditAnnouncement;return c.a.createElement("div",{className:"announcement__items"},t&&t.map((function(e){return c.a.createElement(S,{key:e.id+e.Title,item:e,onRemoveAnnouncement:n,id:e.id,onEditAnnouncement:a})})))};D.defaultProps={announcementsItems:[]};var M=D;function k(e){var t=e.forecast;return c.a.createElement("div",{className:"weather"},c.a.createElement("div",{className:"weather__inner"},c.a.createElement("div",{className:"weather__location"},t.name),c.a.createElement("div",{className:"weather__date"},y()),c.a.createElement("img",{src:"http://openweathermap.org/img/wn/".concat(t.weather[0].icon,"@2x.png"),alt:"icon"}),c.a.createElement("div",{className:"weather__deg"},Math.round(t.main.temp),"\xb0C")))}k.defaultProps={forecast:null};var x=k,F=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.Announcement.announcementsItems})),n=Object(l.c)((function(e){return e.Announcement.titleFast})),a=Object(l.c)((function(e){return e.Announcement.isLoaded})),o=Object(l.c)((function(e){return e.Announcement.forecast})),r=t.length,i=t.filter((function(e){return e.Title.toLowerCase().includes(n.toLowerCase().trim())}));return c.a.createElement("div",{className:"announcement__box"},c.a.createElement("div",{className:"announcement__page"},c.a.createElement(T,{announcementsItemsLength:r,onSetTitleFast:function(t){e(function(e){return{type:E,payload:e}}(t))}}),a?c.a.createElement(M,{announcementsItems:i,onRemoveAnnouncement:function(t){e(function(e){return{type:d,payload:e}}(t))},onEditAnnouncement:function(t){e(function(e){return{type:p,payload:e}}(t))}}):c.a.createElement("h2",null,"Loading . . .")),c.a.createElement("div",{className:"announcement__sidebar"},o&&c.a.createElement(x,{forecast:o})))},P=function(e){var t=e.announcement;return c.a.createElement("div",{className:"announcement__show-inner"},c.a.createElement("div",{className:"announcement__show-title"},t.Title),c.a.createElement("div",{className:"announcement__show-text"},t.Description),c.a.createElement(g.b,{to:"/nerdysoft-task"},c.a.createElement("button",{className:"back-btn"},"Back")))};P.defaultProps={announcement:{}};var R=P,J=function(e){var t=e.topItem;return c.a.createElement("div",{className:"top__item"},c.a.createElement("div",{className:"top__item-title"},c.a.createElement(g.b,{to:"/announcement/".concat(t.id)},t.Title)),c.a.createElement("div",{className:"top__item-date"},t.DateAdded))};J.defaultProps={topItem:{}};var U=J,B=function(e){var t=e.match,n=Object(l.c)((function(e){return e.Announcement.announcementsItems})),a=n.find((function(e){return e.id===Number(t.params.id)}))||{},o=(a.Title+" "+a.Description).split(" "),r=[];return n.filter((function(e){if(e.id!==a.id){var t,n=(e.Title+" "+e.Description).split(" "),c=Object(O.a)(o);try{for(c.s();!(t=c.n()).done;){var i,l=t.value,m=Object(O.a)(n);try{for(m.s();!(i=m.n()).done;){var s=i.value;if(l.toLowerCase()===s.toLowerCase()){if(r.includes(e))continue;r.push(e)}}}catch(u){m.e(u)}finally{m.f()}}}catch(u){c.e(u)}finally{c.f()}}})),c.a.createElement("div",{className:"announcement__box"},c.a.createElement("div",{className:"announcement__page"},c.a.createElement(R,{announcement:a})),c.a.createElement("div",{className:"announcement__sidebar"},c.a.createElement("div",{className:"top__title"},"Top 3 similar announcement"),c.a.createElement("div",{className:"top__inner"},r.length>0?r.map((function(e,t){return t<3&&c.a.createElement(U,{key:e.Title+Math.random(),topItem:e})})):c.a.createElement("h2",null,"Empty"))))};var q=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.Announcement.isFetch}));return c.a.useEffect((function(){t&&(e((function(e){e(h(!1));var t=JSON.parse(localStorage.getItem("items"));null===t?_.a.get("announcement/db.json").then((function(t){var n=t.data;e(N(n.announcement)),localStorage.setItem("items",JSON.stringify(n.announcement))})).catch((function(e){alert("Not found!")})):e(N(t))})),e((function(e){_.a.get("http://api.openweathermap.org/data/2.5/weather?q=lviv&appid=dd2408afcba03fbe2cf444eb94492173&units=metric").then((function(t){var n=t.data;e(b(n))})).catch((function(e){alert("Not found!")}))})))}),[]),c.a.createElement("div",{className:"wrapper"},c.a.createElement(j,{onAddAnnouncement:function(t){e({type:u,payload:t})}}),c.a.createElement("div",{className:"announcement"},c.a.createElement("div",{className:"container"},c.a.createElement(i.a,{exact:!0,path:"/nerdysoft-task",component:function(){return c.a.createElement(F,null)}}),c.a.createElement(i.a,{path:"/announcement/:id",component:B}))))},Z=n(12),V=n(35),X=n(4),H={announcementsItems:[],titleFast:"",isLoaded:!1,isFetch:!0,forecast:null},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(X.a)(Object(X.a)({},e),{},{announcementsItems:t.payload,isLoaded:!0,isFetch:!1});case s:return Object(X.a)(Object(X.a)({},e),{},{isLoaded:t.payload});case u:return localStorage.setItem("items",JSON.stringify(e.announcementsItems.concat(t.payload))),Object(X.a)(Object(X.a)({},e),{},{announcementsItems:e.announcementsItems.concat(t.payload)});case d:var n=e.announcementsItems.filter((function(e){if(e.id!==t.payload)return e}));return localStorage.setItem("items",JSON.stringify(n)),Object(X.a)(Object(X.a)({},e),{},{announcementsItems:n});case p:var a=e.announcementsItems.map((function(e){return e.id===t.payload.id?t.payload:e}));return localStorage.setItem("items",JSON.stringify(a)),Object(X.a)(Object(X.a)({},e),{},{announcementsItems:a});case E:return Object(X.a)(Object(X.a)({},e),{},{titleFast:t.payload});case f:return Object(X.a)(Object(X.a)({},e),{},{forecast:t.payload});default:return e}},Y=Object(Z.c)({Announcement:W}),z=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Z.d,G=Object(Z.e)(Y,z(Object(Z.a)(V.a)));r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(g.a,null,c.a.createElement(l.a,{store:G},c.a.createElement(q,null)))),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.05e0624b.chunk.js.map